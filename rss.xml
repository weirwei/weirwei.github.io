<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>浩雨未倾</title><link>http://blog.weirwei.cn/</link><description>Recent content on 浩雨未倾</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 27 Sep 2023 15:18:00 +0800</lastBuildDate><atom:link href="http://blog.weirwei.cn/rss.xml" rel="self" type="application/rss+xml"/><item><title>MySQL where 范围查询和 order by 关键字无法同时命中索引</title><link>http://blog.weirwei.cn/post/index_in_orderby/</link><pubDate>Wed, 27 Sep 2023 15:18:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/index_in_orderby/</guid><description>&lt;blockquote>
&lt;p>开发中，使用 in 和 order by 的时候，发现无法同时命中索引。&lt;/p>
&lt;/blockquote>
&lt;p>使用 &lt;code>IN&lt;/code> 运算符来过滤行时，&lt;code>MySQL&lt;/code> 会先使用索引来定位表中的行，并将这些行的所有数据读入内存中。随后，&lt;code>MySQL&lt;/code> 会根据查询语句中的 &lt;code>ORDER BY&lt;/code> 子句对这些数据进行排序。&lt;/p></description></item><item><title>Gorm 的黑魔法</title><link>http://blog.weirwei.cn/post/gorm_black_magic/</link><pubDate>Wed, 27 Sep 2023 15:10:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/gorm_black_magic/</guid><description>&lt;blockquote>
&lt;p>小伙看到同事写的Gorm黑魔法，逐渐不淡定了。&lt;/p>
&lt;/blockquote>
&lt;p>开发过程中，看到同事的代码写了这么一段：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">db&lt;/span> = &lt;span style="color:#a6e22e">db&lt;/span>.&lt;span style="color:#a6e22e">Session&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">gorm&lt;/span>.&lt;span style="color:#a6e22e">Session&lt;/span>{&lt;span style="color:#a6e22e">Context&lt;/span>: &lt;span style="color:#a6e22e">db&lt;/span>.&lt;span style="color:#a6e22e">Statement&lt;/span>.&lt;span style="color:#a6e22e">Context&lt;/span>}).&lt;span style="color:#a6e22e">FirstOrCreate&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">entity&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">db&lt;/span>.&lt;span style="color:#a6e22e">Error&lt;/span> &lt;span style="color:#f92672">!=&lt;/span>&lt;span style="color:#66d9ef">nil&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">components&lt;/span>.&lt;span style="color:#a6e22e">ErrorDbInsert&lt;/span>.&lt;span style="color:#a6e22e">WrapPrintf&lt;/span>(&lt;span style="color:#a6e22e">db&lt;/span>.&lt;span style="color:#a6e22e">Error&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Insert error, entity:%s&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">utils&lt;/span>.&lt;span style="color:#a6e22e">ToJson&lt;/span>(&lt;span style="color:#a6e22e">entity&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">db&lt;/span>.&lt;span style="color:#a6e22e">RowsAffected&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">components&lt;/span>.&lt;span style="color:#a6e22e">ErrorAlreadyExist&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>MySQL 索引排序</title><link>http://blog.weirwei.cn/post/mysql_index_sort/</link><pubDate>Wed, 27 Sep 2023 14:52:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/mysql_index_sort/</guid><description>&lt;blockquote>
&lt;p>开发过程中发现SQL一直filesort，所以研究一下到低怎么才能使用索引进行排序。&lt;/p>
&lt;/blockquote></description></item><item><title>go 的切片扩容</title><link>http://blog.weirwei.cn/post/slice_expand/</link><pubDate>Wed, 27 Sep 2023 11:49:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/slice_expand/</guid><description>&lt;blockquote>
&lt;p>在uber 的go语言编码规范中有这么一条，2.48s 和0.21s 的差距还是很惊人了，我很好奇，why？&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="http://blog.weirwei.cn/imgs/img-lazy-loading.gif" data-src="http://blog.weirwei.cn/imgs/post/slice_expand/20211101012619128.png" alt="20211101012619128" />&lt;/p>
&lt;p>切片在&lt;code>append&lt;/code>的时候可能会自动扩容，看一下相关源码。&lt;/p></description></item><item><title>go test 的内联问题</title><link>http://blog.weirwei.cn/post/inlining/</link><pubDate>Wed, 27 Sep 2023 11:00:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/inlining/</guid><description>&lt;blockquote>
&lt;p>使用&lt;code>monkey&lt;/code>对函数进行打桩单测的时候，发现打桩函数没有生效。&lt;/p>
&lt;/blockquote>
&lt;p>习惯直接使用IDE的可视化的&lt;code>run&lt;/code>和&lt;code>debug&lt;/code>功能进行跑单测，没有关注到具体执行的命令。&lt;/p></description></item><item><title>Typora + PicGo + Gitee 解放你对图片的管理</title><link>http://blog.weirwei.cn/post/typora+picgo+gitee/</link><pubDate>Tue, 26 Sep 2023 18:51:00 +0800</pubDate><guid>http://blog.weirwei.cn/post/typora+picgo+gitee/</guid><description>&lt;blockquote>
&lt;p>使用&lt;code>markdown&lt;/code>做笔记的时候，使用图片时，需要将图片放在指定文件夹，然后引用。这么做每次添加图片都比较困难，并且不便于多端使用。&lt;/p>
&lt;/blockquote>
&lt;p>使用&lt;code>PicGo&lt;/code>作为图床，将图片托管到&lt;code>Gitee&lt;/code>，在使用&lt;code>Typora&lt;/code>做笔记的时候可以直接无缝上传图片。&lt;/p></description></item><item><title>关于 Hugo NexT 组织</title><link>http://blog.weirwei.cn/about.html</link><pubDate>Thu, 09 Jun 2022 20:12:52 +0800</pubDate><guid>http://blog.weirwei.cn/about.html</guid><description>Hugo NexT 组织是由众多喜爱 NexT 主题及风格的世界各地友人共同组建而成，为的就是让这个主题继续在 Hugo 引擎中也能得到发扬光大，在此也欢迎你的加入！ 我们的愿景</description></item><item><title>站点示例</title><link>http://blog.weirwei.cn/flinks.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://blog.weirwei.cn/flinks.html</guid><description>如想交换本站友情链接，请在评论区留下你的站点信息，格式参考如下： - name: Hugo-NexT desc: Hugo NexT 官方预览网站。 avatar: https://hugo-next.eu.org/imgs/hugo_next_avatar.png link: https://hugo-next.eu.org</description></item></channel></rss>